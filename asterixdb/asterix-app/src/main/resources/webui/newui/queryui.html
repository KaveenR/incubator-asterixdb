<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AsterixDB Console</title>
  <link rel="stylesheet" href="css/bootstrap.min.css" media="screen" title="no title" charset="utf-8">
  <link rel="stylesheet" href="css/bootstrap-theme.min.css" media="screen" title="no title" charset="utf-8">
  <link rel="stylesheet" href="css/master.css" media="screen" title="no title" charset="utf-8">
  <script src="js/jquery-1.12.4.min.js" charset="utf-8"></script>
  <script src="js/angular.min.js" charset="utf-8"></script>
  <script src="js/bootstrap.min.js" charset="utf-8"></script>
  <script src="js/main.js" charset="utf-8"></script>
</head>
<body ng-app="queryui">
  <div class="row main-container" ng-controller="queryCtrl" ng-init="init()">
    <div class="col-md-4 left-container" ng-class="maximized == true ? 'col-md-12' : 'col-md-4'">
      <div class="row">
        <div class="col-sm-12"><img class="logo" src="img/finalasterixlogo.png" alt="" /></div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <div class="left-using-container">
            <label for="usingSelect" class="col-sm-2 control-label">Using</label>
            <div class="col-sm-10">
              <select class="form-control" id="usingSelect" ng-model="selected_dataverse">
                <option ng-repeat="entry in dataverses" >{{entry}}</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <div class="input-container">
              <div id="input-tab">
                <ul class="nav nav-justified asterix-nav">
                  <li ng-class="current_tab == 0 ? 'asterix-nav-active' : '' "><a href="#" ng-click="current_tab = 0">Query</a></li>
                  <li ng-class="current_tab == 1 ? 'asterix-nav-active' : '' "><a href="#" ng-click="current_tab = 1">History</a></li>
                </ul>
                <div class="asterix-tabpage" ng-if="current_tab == 0">
                  <textarea name="Text1" ng-model="$parent.query_input" class="form-control input-container-code" placeholder="Query" cols="40" rows="15"></textarea>
                  <div class="icon-maximize"><span class="glyphicon glyphicon-fullscreen asterix-button" aria-hidden="true"
                    ng-class="$parent.maximized == true ? 'asterix-button-selected' : '' "
                    ng-click="$parent.maximized = !$parent.maximized"></span></div>
                </div>
                <div class="asterix-tabpage" ng-if="current_tab == 1">
                  <div class="asterix-well margin-bottom" ng-repeat="query in history track by $index">
                    <div class="row">
                      <div class="col-md-8">{{query}}</div>
                      <div class="col-md-4 asterix-well-right"><a href="" ng-click="preview(query)">Preview</a></div>
                    </div>
                  </div>
                  <div class="icon-maximize"><span class="glyphicon glyphicon-fullscreen asterix-button" aria-hidden="true"
                    ng-class="$parent.maximized == true ? 'asterix-button-selected' : '' "
                    ng-click="$parent.maximized = !$parent.maximized"></span></div>
                </div>
              </div>
          </div>
        </div>
      </div>
      <div class="row vh-spacer">
        <div class="col-sm-12">
          <button type="button" class="btn btn-asterix center-block" ng-click="query()">Run</button>
        </div>
      </div>
    </div>
    <div ng-if="!maximized" class="col-md-8 right-container">
      <p class="asterix-status">{{statusText}}</p>
      <div class="alert alert-danger" role="alert" ng-if="errorText != null">{{errorText}}</div>
      <div class="right-toolbar">
        <span class="glyphicon glyphicon-align-justify asterix-button" aria-hidden="true"
          ng-class="current_list == 0 ? 'asterix-button-selected' : '' "
          ng-click="current_list = 0"></span>
        <span class="glyphicon glyphicon-th-large asterix-button" aria-hidden="true"
          ng-class="current_list == 1 ? 'asterix-button-selected' : '' "
          ng-click="current_list = 1"></span>
      </div>
      <div class="asterix-list-view" ng-if="current_list == 0 && results.length != 0">
        <table class="table table-hover asterix-table">
          <tbody>
            <tr ng-repeat="record in $parent.results">
              <td ng-repeat="key in ObjectKeys(record)" class="asterix-inline-item" ng-class="isRecordPlus(record[key])">
                <p class="small asterix-small">{{key}}</p>{{ObjectValue(record[key])}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="asterix-list-wells" ng-if="current_list == 1 && results.length != 0">
        <div ng-repeat="record in $parent.results" class="asterix-well flex-well">
          <div ng-repeat="key in ObjectKeys(record)" class="row asterix-well-row">
            <div class="col-sm-6" ng-class="isRecordPlus(record[key])">{{ObjectValue(record[key])}}</div>
            <div class="col-sm-6 asterix-well-right"><p class="small asterix-small">{{key}}</p></div>
          </div>
          <div class="row">
            <div class="col-sm-12" ng-if="isNested(record)">
              <span class="label label-warning">NESTED</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
